<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>GeoAR.js demo</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
    <script src="https://raw.githack.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
    <script
        src="https://unpkg.com/aframe-environment-component@1.2.0/dist/aframe-environment-component.min.js"></script>
    <script>
        THREEx.ArToolkitContext.baseURL = 'https://raw.githack.com/jeromeetienne/ar.js/master/three.js/'
    </script>
</head>

<body style="margin: 0; overflow: hidden;">
    <a-scene vr-mode-ui="enabled: false" embedded arjs="sourceType: webcam; debugUIEnabled: false;">
        <!-- <a-text value="This content will always face you." look-at="[gps-camera]" scale="120 120 120"
            gps-entity-place="latitude: <add-your-latitude>; longitude: <add-your-longitude>;"></a-text>
        <a-camera gps-camera rotation-reader> </a-camera> -->
        <a-assets>
            <img id="rock" src="./assets/img/mYmmbrp.jpg">
            <img id="wooden" src="./assets/img/wooden.png">
            <img id="groundTexture" src="https://cdn.aframe.io/a-painter/images/floor.jpg">
            <img id="skyTexture" src="https://cdn.aframe.io/a-painter/images/sky.jpg">
            <a-asset-item id="role" src="./assets/role/scene.gltf"></a-asset-item>
        </a-assets>

        <!-- <a-cylinder id="ground" src="#groundTexture" radius="500" height="0.1"></a-cylinder> -->
        <!-- <a-sky id="background" src="#skyTexture" theta-length="90" radius="500"></a-sky> -->

        <a-entity
            environment="preset: forest; skyType: atmosphere; groundTexture: checkerboard; ground: flat; dressingAmount: 1000;">
        </a-entity>

        <a-light type="ambient" color="#375e56"></a-light>

        <!-- 轉向測試 -->
        <a-gltf-model gps-entity-place="longitude: 121.43159629816697; latitude: 25.03514787141554" data-raycastable
            id="tr" src="#role" position="0 0 0" scale="0.085 0.085 0.085" rotation="0 200 0" animation-mixer>
        </a-gltf-model>

        <a-gltf-model gps-entity-place="longitude:  121.42186267776907; latitude: 25.038361763234835" data-raycastable
            look-at="[gps-camera]" src="#role" position="0 0 0" scale="0.085 0.085 0.085" rotation="0 0 0"
            animation-mixer>
        </a-gltf-model>

        <!-- <a-entity gps-entity-place="longitude:  121.42180662707015; latitude: 25.038405440942405" data-raycastable
            gltf-model="./assets/role/scene.gltf" position="0 0 0" scale="0.2 0.2 0.2" rotation="0 0 0"
            animation="property: rotation;startEvents: click; to: 0 180 0; dir: alternate; dur: 1500; easing:easeOutCubic;"
            animation-mixer>
        </a-entity> -->

        <!-- <a-entity gps-entity-place="longitude:  121.4219818035106; latitude: 25.038317219651887"
            gltf-model="./assets/role2/scene.gltf" position="0 8 0" scale="0.003 0.003 0.003" rotation="0 180 0"
            animation__2="property: object3D.position.y; to: 8.5; dir: alternate; dur: 2000; loop: true"
            animation__3="property: rotation;startEvents: click; to: 0 0 0; dir: alternate; dur: 1500; easing:easeOutCubic;"
            animation-mixer>
        </a-entity> -->



        <a-box gps-entity-place="longitude:  121.42186267776907; latitude: 25.038361763234835" data-raycastable
            src="./assets/img/wooden2.png" position="0 4 0" scale="1 1 1"
            animation="property: rotation;from: 0 0 0; to: 0 360 0; dir: normal; dur: 15000; loop: true;easing:linear;delay: 5000"
            animation__2="property: object3D.position.y; to: 4.5; dir: alternate; dur: 2000; loop: true;delay: 5000"
            animation__3="property: rotation;startEvents: click;; to: 0 720 0; dir: alternate; dur: 2500; easing:easeOutCubic;"
            animation__4="property: scale;startEvents: click; to: 0 0 0; dir: alternate;  dur: 500; easing:linear;delay: 1000"
            animation__5="property: rotation;startEvents: mouseleave; to: 0 360 0; dir: normal; dur: 20000; loop: true;easing:linear">
        </a-box>


        <a-box gps-entity-place="longitude:  121.42179476142465; latitude: 25.03843623509647" data-raycastable
            src="./assets/img/question.jpg" position="0 4 0" scale="1 1 1"
            animation="property: rotation;from: 0 0 0; to: 0 360 0; dir: normal; dur: 15000; loop: true;easing:linear;delay: 1500"
            animation__2="property: object3D.position.y; to: 4.5; dir: alternate; dur: 2000; loop: true;delay: 1500"
            animation__3="property: rotation;startEvents: click;; to: 0 720 0; dir: alternate; dur: 2500; easing:easeOutCubic;"
            animation__4="property: scale;startEvents: click; to: 0 0 0; dir: alternate;  dur: 500; easing:linear;delay: 1000"
            animation__5="property: rotation;startEvents: mouseleave; to: 0 360 0; dir: normal; dur: 20000; loop: true;easing:linear">
        </a-box>


        <!-- <a-box gps-entity-place="longitude:  121.42341939509463; latitude: 25.03842430009167"
            src="./assets/img/wooden2.png" position="0 8 0" rotation="0 45 45" scale="2 2 2"
            animation="property: rotation;from: 0 0 0; to: 0 360 0; dir: normal; dur: 15000; loop: true;easing:linear;delay: 2000"
            animation__2="property: object3D.position.y; to: 8.5; dir: alternate; dur: 2000; loop: true;delay: 2000"
            animation__3="property: rotation;startEvents: click;; to: 0 720 0; dir: alternate; dur: 2500; easing:easeOutCubic;"
            animation__4="property: scale;startEvents: click; to: 0 0 0; dir: alternate;  dur: 500; easing:linear;delay: 1000"
            animation__5="property: rotation;startEvents: mouseleave; to: 0 360 0; dir: normal; dur: 20000; loop: true;easing:linear">
        </a-box>



        <a-box gps-entity-place="longitude:  121.42625086293434; latitude: 25.041665231379895"
            src="./assets/img/wooden2.png" position="0 8 0" rotation="0 45 45" scale="2 2 2"
            animation="property: rotation;from: 0 0 0; to: 0 360 0; dir: normal; dur: 15000; loop: true;easing:linear;delay: 3000"
            animation__2="property: object3D.position.y; to: 8.5; dir: alternate; dur: 2000; loop: true;delay: 3000"
            animation__3="property: rotation;startEvents: click;; to: 0 720 0; dir: alternate; dur: 2500; easing:easeOutCubic;"
            animation__4="property: scale;startEvents: click; to: 0 0 0; dir: alternate;  dur: 500; easing:linear;delay: 1000"
            animation__5="property: rotation;startEvents: mouseleave; to: 0 360 0; dir: normal; dur: 20000; loop: true;easing:linear">
        </a-box>


        <a-box gps-entity-place="longitude:  121.43057285997057; latitude: 25.035921672714156"
            src="./assets/img/question.jpg" position="0 8 0" rotation="0 45 45" scale="2 2 2"
            animation="property: rotation;from: 0 0 0; to: 0 360 0; dir: normal; dur: 20000; loop: true;easing:linear"
            animation__2="property: object3D.position.y; to: 8.5; dir: alternate; dur: 2000; loop: true"
            animation__3="property: rotation;startEvents: click;; to: 0 720 0; dir: alternate; dur: 2500; easing:easeOutCubic;"
            animation__4="property: scale;startEvents: click; to: 0 0 0; dir: alternate;  dur: 500; easing:linear;delay: 1000"
            animation__5="property: rotation;startEvents: mouseleave; to: 0 360 0; dir: normal; dur: 20000; loop: true;easing:linear">
        </a-box>



        <a-box gps-entity-place="longitude:  121.43149032939922; latitude: 25.035342785049135"
            src="./assets/img/wooden2.png" position="0 8 0" rotation="0 45 45" scale="2 2 2"
            animation="property: rotation;from: 0 0 0; to: 0 360 0; dir: normal; dur: 20000; loop: true;easing:linear"
            animation__2="property: object3D.position.y; to: 8.5; dir: alternate; dur: 2000; loop: true"
            animation__3="property: rotation;startEvents: click;; to: 0 720 0; dir: alternate; dur: 2500; easing:easeOutCubic;"
            animation__4="property: scale;startEvents: click; to: 0 0 0; dir: alternate;  dur: 500; easing:linear;delay: 1000"
            animation__5="property: rotation;startEvents: mouseleave; to: 0 360 0; dir: normal; dur: 20000; loop: true;easing:linear">
        </a-box> -->



        <!-- maxDistance: 30; -->
        <!-- <a-camera gps-camera rotation-reader> </a-camera> -->
        <a-camera gps-camera="maxDistance: 30;" rotation-reader>
            <a-entity id="camera"
                animation__click="property: scale; startEvents: click; easing: easeInCubic; dur: 150; from: 0.1 0.1 0.1; to: 1 1 1"
                animation__fusing="property: scale; startEvents: fusing; easing: easeInCubic; dur: 1500; from: 1 1 1; to: 0.1 0.1 0.1"
                animation__mouseleave="property: scale; startEvents: mouseleave; easing: easeInCubic; dur: 500; to: 1 1 1"
                cursor="fuse: true;" material="color: cyan; shader: flat" position="0 0 -2"
                raycaster="far: 10; interval: 0; objects: [data-raycastable]"
                geometry="primitive: ring; radiusInner: 0.05; radiusOuter: 0.08;">
            </a-entity>
        </a-camera>
    </a-scene>
    <script>
        let camera = document.querySelector("#camera")
        let evtr = document.querySelector("#tr")
        evtr.addEventListener("click", function () {
            evtr.setAttribute('animation', `property: rotation; to: ${camera.object3D.position}; dir: normal; dur: 1200; easing:easeOutCubic`)
        })
    </script>
</body>

</html>